(()=>{"use strict";var t={767:(t,e,n)=>{n.d(e,{Z:()=>f});var a=n(645),r=n.n(a),s=n(667),o=n.n(s),i=n(449),c=n(172),l=n(320),u=r()((function(t){return t[1]})),p=o()(i.Z),d=o()(c.Z),g=o()(l.Z);u.push([t.id,"* {\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\n.container {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n    padding: 10px;\r\n}\r\n\r\n.container-crud {\r\n    padding-top: 20px;\r\n}\r\n\r\n.button {\r\n    padding: 10px;\r\n    border: none;\r\n    border-radius: 10px;\r\n    box-shadow: 1px 5px 5px 0px rgba(212, 148, 45, 0.51);\r\n    background-color: rgb(248, 228, 46);\r\n    font-size: 14px;\r\n}\r\n\r\n.button:hover {\r\n    box-shadow: 1px 7px 7px 0px rgba(212, 148, 45, 0.51);\r\n    background-color: rgb(214, 198, 52);\r\n    transition: 1s;\r\n    cursor: pointer;\r\n}\r\n\r\n.input {\r\n    height: 25px;\r\n    padding: 5px;\r\n    border-radius: 5px;\r\n    font-size: 16px;\r\n}\r\n\r\n.input:hover {\r\n    cursor: pointer;\r\n}\r\n\r\n.button-generate {\r\n    width: 210px;\r\n}\r\n\r\n.button-generate,\r\n.button-create,\r\n.button-update {\r\n    background-color: rgb(232, 157, 28);\r\n}\r\n\r\n.container-track {\r\n    padding-top: 40px;\r\n}\r\n\r\n.label {\r\n    font-size: 24px;\r\n}\r\n\r\n.car-image {\r\n    position: absolute;\r\n    top: -13px;\r\n    left: 20px;\r\n    width: 60px;\r\n}\r\n\r\n.bottom-container {\r\n    position: relative;\r\n    height: fit-content;\r\n    border-bottom: dotted 2px black;\r\n}\r\n\r\n.finish-image {\r\n    position: absolute;\r\n    top: 15px;\r\n    right: 90px;\r\n    width: 40px;\r\n}\r\n\r\n.split-layer {\r\n    position: fixed;\r\n    top: 0;\r\n    width: 100vw;\r\n    height: 100%;\r\n    background-color: azure;\r\n    z-index: 1;\r\n}\r\n\r\n.upper-layer {\r\n    position: relative;\r\n    padding-left: 20px;\r\n    z-index: 2;\r\n}\r\n\r\n.go-top {\r\n    position: absolute;\r\n    top:60px;\r\n}\r\n\r\n.table-item {\r\n    text-align: center;\r\n    padding: 0 18px;\r\n}\r\n\r\n.inactive,\r\n.inactive:hover {\r\n    background-color: gray;\r\n}\r\n\r\n.pagination {\r\n    display: flex;\r\n    justify-content: center;\r\n    gap: 20px;\r\n    padding: 30px 0;\r\n}\r\n\r\n.button-prev,\r\n.button-next {\r\n    width: 120px;   \r\n}\r\n\r\n.car-svg-container {\r\n    position: relative;\r\n}\r\n\r\n.winner-label-container {\r\n    position: fixed;\r\n    top: 50vh;\r\n    left: calc(50vw - 120px);\r\n    z-index: 10;\r\n}\r\n\r\n.winner-label {\r\n    font-size: 32px;\r\n    color: red;\r\n}\r\n\r\n.car-item {\r\n    position: static;\r\n    width: 45px;\r\n}\r\n\r\n.sort {\r\n    background: url("+p+");\r\n    background-repeat: no-repeat ;\r\n    background-position: 100%;\r\n    user-select: none;\r\n}\r\n\r\n.sort:hover {\r\n    cursor: pointer;\r\n}\r\n\r\n.ascending {\r\n    background: url("+d+");\r\n    background-repeat: no-repeat ;\r\n    background-position: 100%;\r\n}\r\n\r\n.descending {\r\n    background: url("+g+");\r\n    background-repeat: no-repeat ;\r\n    background-position: 100%;\r\n}",""]);const f=u},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,a){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(a)for(var s=0;s<this.length;s++){var o=this[s][0];null!=o&&(r[o]=!0)}for(var i=0;i<t.length;i++){var c=[].concat(t[i]);a&&r[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},667:t=>{t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},172:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/img/asc.gif"},449:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/img/bg.gif"},320:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/img/desc.gif"},163:(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});const a=n.p+"assets/img/finish.png"},807:(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});const a=n.p+"assets/img/sports-car.svg"},379:(t,e,n)=>{var a,r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function o(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function i(t,e){for(var n={},a=[],r=0;r<t.length;r++){var i=t[r],c=e.base?i[0]+e.base:i[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var p=o(u),d={css:i[1],media:i[2],sourceMap:i[3]};-1!==p?(s[p].references++,s[p].updater(d)):s.push({identifier:u,updater:b(d,e),references:1}),a.push(u)}return a}function c(t){var e=document.createElement("style"),a=t.attributes||{};if(void 0===a.nonce){var s=n.nc;s&&(a.nonce=s)}if(Object.keys(a).forEach((function(t){e.setAttribute(t,a[t])})),"function"==typeof t.insert)t.insert(e);else{var o=r(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var l,u=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function p(t,e,n,a){var r=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(t.styleSheet)t.styleSheet.cssText=u(e,r);else{var s=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}function d(t,e,n){var a=n.css,r=n.media,s=n.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var g=null,f=0;function b(t,e){var n,a,r;if(e.singleton){var s=f++;n=g||(g=c(e)),a=p.bind(null,n,s,!1),r=p.bind(null,n,s,!0)}else n=c(e),a=d.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var n=i(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var a=0;a<n.length;a++){var r=o(n[a]);s[r].references--}for(var c=i(t,e),l=0;l<n.length;l++){var u=o(n[l]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}n=c}}}}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var s=e[a]={id:a,exports:{}};return t[a](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var a=e.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.nc=void 0,(()=>{const t="http://127.0.0.1:3000",e=`${t}/garage`,a=`${t}/engine`,r=`${t}/winners`,s="container",o=["Number","Car","Name","Wins","Best time (seconds)"],i=["garage","winners"],c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],l=1e3,u={Moscvich:["400","402","408","415","2150","2142"],BMW:["2","3","4","5","6","7"],Lexus:["RX","ES","NX","GX","LX","LS"],Ferrari:["296 GTB","Roma","F8 Tributo","812 Superfast","SF90 Stradale"],LADA:["Granta","Vesta","XRAY","Largus","4x4","Niva"],Nissan:["Pathfinder","X-Trail","Qashqai","Terrano","Murano","Juke"],Toyota:["Corolla","Camry","C-HR","RAV4","Highlander","Fortuner"]},p={0:"descending",1:"ascending"};var d,g,f;!function(t){t[t.DESC=0]="DESC",t[t.ASC=1]="ASC"}(d||(d={})),function(t){t[t.started=0]="started",t[t.stopped=1]="stopped",t[t.drive=2]="drive"}(g||(g={})),function(t){t[t.id=0]="id",t[t.wins=1]="wins",t[t.time=2]="time"}(f||(f={}));const b={activeLayer:i[0],pageGarage:1,pageWinners:1,sort:"wins",order:d.DESC,maxPagesGarage:1,maxPagesWinners:1,isRace:!1,carStatus:new Map,carCurrentX:new Map,carDriveStatus:new Map},h=b;function v(t,e,n=!1){const a=`<svg xmlns="http://www.w3.org/2000/svg" class = "car-image ${n?"car-item":""}" enable-background="new 0 0 512 512" viewBox="0 0 512 512"><path fill="${e}" d="M417.3 349c-29.6 0-53.7-24.1-53.7-53.7s24.1-53.7 53.7-53.7 53.7 24.1 53.7 53.7S446.9 349 417.3 349zM417.3 251.5c-24.1 0-43.7 19.6-43.7 43.7s19.6 43.7 43.7 43.7 43.7-19.6 43.7-43.7S441.4 251.5 417.3 251.5zM93.1 349c-29.6 0-53.7-24.1-53.7-53.7s24.1-53.7 53.7-53.7 53.7 24.1 53.7 53.7S122.7 349 93.1 349zM93.1 251.5c-24.1 0-43.7 19.6-43.7 43.7S69 339 93.1 339s43.7-19.6 43.7-43.7S117.2 251.5 93.1 251.5z"/><path fill="${e}" d="M93.1 324.2c-15.9 0-28.9-13-28.9-28.9s13-28.9 28.9-28.9 28.9 13 28.9 28.9S109 324.2 93.1 324.2zM93.1 276.3c-10.4 0-18.9 8.5-18.9 18.9s8.5 18.9 18.9 18.9 18.9-8.5 18.9-18.9S103.5 276.3 93.1 276.3zM417.1 324.2c-15.9 0-28.9-13-28.9-28.9s13-28.9 28.9-28.9 28.9 13 28.9 28.9S433 324.2 417.1 324.2zM417.1 276.3c-10.4 0-18.9 8.5-18.9 18.9s8.5 18.9 18.9 18.9 18.9-8.5 18.9-18.9S427.5 276.3 417.1 276.3z"/><path fill="${e}" d="M495,324h-35.3v-10H490v-18.8c0-0.7,0.1-1.4,0.4-2l10.4-23.7l-19.9-14.9\n    c-22-16.5-49.2-25.6-76.7-25.6H362c-1,0-2-0.3-2.8-0.9l-44.3-30.1c-24.2-16.4-52.4-25.1-81.6-25.1H128.7L10,209.2v4.8h6\n    c2.8,0,5,2.2,5,5v43c0,2.8-2.2,5-5,5h-6v27.3L25,314h25.6v10H22.5c-1.6,0-3-0.7-4-2L1,299c-0.7-0.9-1-1.9-1-3v-34\n    c0-2.8,2.2-5,5-5h6v-33H5c-2.8,0-5-2.2-5-5v-13.5c0-2.2,1.4-4.1,3.5-4.8l123-37.5c0.5-0.1,1-0.2,1.5-0.2h105.3\n    c31.2,0,61.4,9.3,87.2,26.8l43,29.2h40.7c29.6,0,59,9.8,82.7,27.6l23.1,17.3c1.9,1.4,2.5,3.9,1.6,6L500,296.3V319\n    C500,321.8,497.8,324,495,324z"/><rect width="71.6" height="10" x="303.2" y="314" fill="${e}"/><rect width="147.7" height="10" x="135.5" y="314" fill="${e}"/><path fill="${e}" d="M37.7 267H16c-2.8 0-5-2.2-5-5v-43c0-2.8 2.2-5 5-5h21.8c2 0 3.8 1.2 4.6 3l10.5 24.5c.6 1.4.5 3.1-.2 4.4l-10.5 18.5C41.2 266 39.5 267 37.7 267zM21 257h13.8l7.8-13.8L34.5 224H21V257zM331 227h-75c-.3 0-.5 0-.8-.1l-100.5-15.5 1.5-9.9L256.4 217h59l-4.1-2.9c-24.8-17.7-54-27.1-84.5-27.1h-89.1l-26.2 7.7 24.8 3.8-1.5 9.9-47-7.2c-2.3-.4-4.1-2.3-4.2-4.6-.2-2.3 1.3-4.5 3.6-5.1l48.5-14.2c.5-.1.9-.2 1.4-.2h89.8c32.6 0 63.8 10 90.3 28.9l16.8 12c1.8 1.3 2.5 3.5 1.9 5.6C335.1 225.6 333.2 227 331 227z"/><path fill="${e}" d="M195.2 217.7c-.3 0-.5 0-.8-.1l-20.4-3.1c-2.4-.4-4.2-2.5-4.2-4.9V182c0-2.8 2.2-5 5-5h20.4c2.8 0 5 2.2 5 5v30.6c0 1.5-.6 2.8-1.7 3.8C197.6 217.2 196.4 217.7 195.2 217.7zM179.8 205.2l10.4 1.6V187h-10.4V205.2zM356.2 300.2l-162.6-9.7c-1.4-.1-2.7-.8-3.6-1.9l-30.9-39c-1-1.2-1.3-2.8-.9-4.3s1.4-2.7 2.8-3.4l32.3-14.5c.9-.4 1.8-.5 2.8-.4l158.4 24-1.5 9.9L196 237.2l-25 11.2 25.5 32.2 160.4 9.6L356.2 300.2z"/><rect width="31" height="10" x="476" y="263" fill="${e}"/></svg>`;return n||t.insertAdjacentHTML("beforeend",a),a}function m(t,e){const n=Y({type:"div",parentElement:t,classes:[s,`container-${e}`],tag:i[0]});return Y({type:"input",parentElement:n,classes:["input",`text-${e}`],attributes:[["type","text"]],tag:i[0]}),Y({type:"input",parentElement:n,classes:["input",`color-${e}`],attributes:[["type","color"]],tag:i[0]}),Y({type:"button",parentElement:n,classes:["button",`button-${e}`,"inactive"],text:e.toUpperCase(),tag:i[0]}),n}function y(t,e,n){const a=Y({type:"div",parentElement:t,classes:[s],tag:n.toLowerCase()});Y({type:"p",parentElement:a,classes:[`${n}-items`,"label"],text:`${n.toUpperCase()} (${e||"0"})`,tag:n.toLowerCase()}),function(t,e){if(e===i[0]){const e=t%7>0?1:0,n=Math.floor(t/7)+e;b.maxPagesGarage=n}else if(e===i[1]){const e=t%10>0?1:0,n=Math.floor(t/10)+e;b.maxPagesWinners=n}}(Number(e),n.toLowerCase())}function w(t,e,n){const a=Y({type:"div",parentElement:t,classes:[s],tag:`${n||i[0]}`});Y({type:"p",parentElement:a,classes:["page-number","label"],text:`Page #${e}`,tag:`${n||i[0]}`})}function E(t,e){const n=Y({type:"div",parentElement:t,classes:["pagination"],tag:e});Y({type:"button",parentElement:n,classes:["button","button-prev",`button-${e}-prev`],text:"PREV",tag:e}),Y({type:"button",parentElement:n,classes:["button","button-next",`button-${e}-next`],text:"NEXT",tag:e}),function(t){const e=`page${D(t)}`,n=`maxPages${D(t)}`;1===b[e]?W(`button-${t}-prev`,!1):W(`button-${t}-prev`,!0),b[e]>=b[n]?W(`button-${t}-next`,!1):W(`button-${t}-next`,!0)}(e)}async function x(t){const e=Y({type:"div",parentElement:document.body,classes:[i[0],b.activeLayer===i[0]?"upper-layer":""],tag:i[0]});!function(t){const e=Y({type:"div",parentElement:t,classes:["container-crud"],tag:i[0]});m(e,"create"),m(e,"update");const n=Y({type:"div",parentElement:e,classes:[s],tag:i[0]});Y({type:"button",parentElement:n,classes:["button","button-race"],text:"RACE",tag:i[0]}),Y({type:"button",parentElement:n,classes:["button","button-reset","inactive"],text:"RESET",tag:i[0]}),Y({type:"button",parentElement:n,classes:["button","button-generate"],text:"GENERATE CARS",tag:i[0]})}(e),await async function(t,e){const n=Y({type:"div",parentElement:t,classes:["container-track"],tag:i[0]}),a=await e;y(n,a.count,i[0]),w(n,b.pageGarage),function(t,e){e.forEach((e=>{!function(t,e){const n=Y({type:"div",parentElement:t,classes:["container-car"],tag:i[0]}),a=Y({type:"div",parentElement:n,classes:[s],tag:i[0]});Y({type:"button",parentElement:a,classes:["button","button-select"],text:"SELECT",attributes:[["value",`${e.id||""}`]],tag:i[0]}),Y({type:"button",parentElement:a,classes:["button","button-remove"],text:"REMOVE",attributes:[["value",`${e.id||""}`]],tag:i[0]}),Y({type:"p",parentElement:a,classes:["car-name"],text:e.name,tag:i[0]});const r=Y({type:"div",parentElement:t,classes:[s,"bottom-container"],tag:i[0]});Y({type:"button",parentElement:r,classes:["button","button-start"],text:"A",attributes:[["value",`${e.id||""}`]],tag:i[0]}),Y({type:"button",parentElement:r,classes:["button","button-stop","inactive"],text:"B",attributes:[["value",`${e.id||""}`]],tag:i[0]}),v(Y({type:"div",parentElement:r,classes:["car-svg-container"],attributes:[["value",`${e.id||""}`]],tag:i[0]}),e.color),Y({type:"img",parentElement:r,classes:["finish-image"],attributes:[["src","./assets/img/finish.png"],["alt","finish flag"]],tag:i[0]}),e.id&&U(e.id?.toString(),"stopped")}(t,e)}))}(Y({type:"div",parentElement:n,classes:["container-cars"],tag:i[0]}),a.items)}(e,t),E(e,i[0])}function L(t,e,n){const a=Y({type:"tr",parentElement:t,classes:["row"],tag:i[1]}),r=n?"th":"td";e[1]&&e.forEach((t=>{Y({type:r,parentElement:a,classes:["table-item",n&&["Wins","Best time (seconds)"].includes(t)?"sort":"uselessClass",`${C(t)===b.sort?p[b.order]:"uselessClass"}`].filter((t=>"uselessClass"!==t)),tag:i[1]}).innerHTML=t}))}n(807),n(163);const $=async function(t){const e=Y({type:"div",parentElement:document.body,classes:[i[1],"go-top",b.activeLayer===i[1]?"upper-layer":"uselessClass"].filter((t=>"uselessClass"!==t)),tag:i[1]});y(e,t.count,i[1]),w(e,b.pageWinners,i[1]),await function(t,e){const n=Y({type:"table",parentElement:t,classes:["table"],tag:i[1]});L(n,o,!0);for(let t=0;t<e.length;t+=1){const{wins:a,time:r,car:s}=e[t];s&&L(n,[(t+1).toString(),v(document.body,s.color,!0),s.name,a.toString(),r.toString()])}}(e,t.items),E(e,i[1])};async function S(t){z(i[1]),Q(i[1]),await $(t),P()}function C(t){return t?"Wins"===t?f[1]:"time"===t.split(" ")[1]?f[2]:f[0]:f[0]}const M=S;function T(t,e){O.get(t)?.forEach((t=>{t.removeEventListener("click",e,!1),t.classList.add("inactive")}))}function k(t,e){O.get(t)?.forEach((t=>{t.addEventListener("click",e),t.classList.remove("inactive")}))}function j(){const[t,e]=i;b.activeLayer===t?(k("garage-button",j),T("winners-button",j),b.activeLayer=e):(T("garage-button",j),k("winners-button",j),b.activeLayer=t),i.forEach((t=>{O.get(t)?.forEach((t=>{t.classList.toggle("upper-layer")}))}))}function A(){O.get("winners-button")?.forEach((t=>{t.addEventListener("click",j)})),O.get("button-create")?.forEach((t=>{t.addEventListener("click",(async()=>{const t=G("text-create"),e=G("color-create");t&&e&&(await tt({name:t,color:e}),N())}))})),O.get("text-create")?.forEach((t=>{t.addEventListener("keyup",(()=>{const e=O.get("button-create")?.slice(-1)[0];e&&(t.value?e.classList.remove("inactive"):e.classList.add("inactive"))}))})),O.get("button-select")?.forEach((t=>{t.addEventListener("click",(async()=>{const e=t.value;var n,a;R("text-update",(n=await K(e)).name),R("color-update",n.color),(a=n.id)&&O.get("text-update")?.forEach((t=>{t.id=a.toString()})),W("button-update",!0),W("button-select",!0),t.classList.add("inactive")}))})),O.get("button-update")?.forEach((t=>{t.addEventListener("click",(async()=>{const t=G("text-update"),n=G("color-update"),a=G("text-update",!0);if(t&&n){await async function(t,n){return(await fetch(`${e}/${t}`,{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})).json()}(a,{name:t,color:n}),await N();const r=await et(h.pageWinners,h.sort,h.order);M(r)}}))})),O.get("button-remove")?.forEach((t=>{t.addEventListener("click",(async n=>{n.preventDefault();const a=t.value;await async function(t){await fetch(`${e}/${t}`,{method:"DELETE"})}(a),await N(),await async function(t){return(await fetch(`${r}/${t}`,{method:"DELETE"})).json()}(a);const s=await et(h.pageWinners,h.sort,h.order);M(s)}))})),O.get("button-generate")?.forEach((t=>{t.addEventListener("click",(async()=>{const t=[];for(let e=0;e<100;e+=1){const e=_(),n=B();t.push(tt({name:n,color:e}))}await Promise.allSettled(t),N()}))})),O.get("button-garage-next")?.forEach((t=>{t.addEventListener("click",(()=>{t.classList.contains("inactive")||(h.pageGarage+=1,N())}))})),O.get("button-garage-prev")?.forEach((t=>{t.addEventListener("click",(()=>{t.classList.contains("inactive")||(h.pageGarage-=1,N())}))})),O.get("button-start")?.forEach((t=>{t.addEventListener("click",(async()=>{if(!t.classList.contains("inactive")){const e=t.value;W("button-start",!1,e),W("button-stop",!0,e),W("button-reset",!0),W("button-race",!1),await J(e),V(e)}}))})),O.get("button-stop")?.forEach((t=>{t.addEventListener("click",(()=>{t.classList.contains("inactive")||(I(t.value),function(){let t=!0;return O.get("button-start")?.forEach((e=>{e.classList.contains("inactive")&&(t=!1)})),t}()&&(W("button-reset",!1),W("button-race",!0)))}))})),O.get("button-reset")?.forEach((t=>{t.addEventListener("click",(async()=>{const t=await nt(h.pageGarage);let e=0;t.items.forEach((async n=>{n.id&&await I(n.id.toString()),e===t.items.length-1&&(W("button-reset",!1),W("button-race",!0)),e+=1}))}))})),O.get("button-race")?.forEach((t=>{t.addEventListener("click",(async()=>{if(!t.classList.contains("inactive")){t.classList.add("inactive");const e=await nt(h.pageGarage);h.isRace=!0,W("button-reset",!0);const n=[];e.items.forEach((t=>{if(t.id){const e=t.id.toString(),a=new Promise((t=>{t(async function(t){W("button-start",!1,t),W("button-stop",!0,t),await J(t),V(t)}(e))}));n.push(a)}})),Promise.all(n)}}))}))}function P(){O.get("sort")?.forEach((t=>{t.addEventListener("click",(async t=>{const e=t.target,n=e.innerText;var a;a=e,O.get("sort")?.forEach((t=>{t!==a&&(t.classList.remove("ascending"),t.classList.remove("descending"))})),function(t){const e=t.classList;e.contains("ascending")?(e.remove("ascending"),e.add("descending")):e.contains("descending")&&e.remove("descending"),e.add("ascending")}(e),b.order=function(t){return t.classList.contains("descending")?d.DESC:d.ASC}(e),b.sort=C(n),S(await et(b.pageWinners,b.sort,b.order))}))})),O.get("button-winners-next")?.forEach((t=>{t.addEventListener("click",(async()=>{t.classList.contains("inactive")||(b.pageWinners+=1,S(await et(b.pageWinners,b.sort,b.order)))}))})),O.get("button-winners-prev")?.forEach((t=>{t.addEventListener("click",(async()=>{t.classList.contains("inactive")||(b.pageWinners-=1,S(await et(b.pageWinners,b.sort,b.order)))}))}))}function z(t){O.get(t)?.forEach((t=>{t.remove()}))}async function N(){const t=nt(h.pageGarage);z(i[0]),Q(i[0]),await x(t),A()}function R(t,e){O.get(t)?.forEach((t=>{t.value=e}))}function W(t,e,n){O.get(t)?.forEach((t=>{n?t.value===n&&(e?t.classList.remove("inactive"):t.classList.add("inactive")):e?t.classList.remove("inactive"):t.classList.add("inactive")}))}const O=new Map,H=new Map;function G(t,e){let n="";return O.get(t)?.forEach((t=>{n=e?t.id:t.value})),n}function X(t,e){return Math.floor(Math.random()*(e+t)+t)}function _(){const t=c.length;let e="#";for(let n=0;n<6;n+=1)e+=c[X(0,t)];return e}function B(){const t=Object.keys(u),e=X(0,t.length),n=X(0,u[t[e]].length);return`${t[e]} ${u[t[e]][n]}`}function D(t){return t[0].toUpperCase()+t.slice(1)}async function V(t){const e=await async function(t){const e=await fetch(`${a}?id=${t}&status=drive`,{method:"PATCH"}).catch();return 200===e.status?{...await e.json()}:{success:!1}}(t);e.success||b.carStatus.set(t,g[2])}async function F(t,e){(function(t,e){const n=Y({type:"div",parentElement:document.body,classes:["winner-label-container"]});Y({type:"p",parentElement:n,classes:["winner-label"],text:`${t} wins with result ${e/l} seconds!`})})(t.name,e),setTimeout((()=>{O.get("winner-label-container")?.forEach((t=>{t.style.display="none"})),O.delete("winner-label-container")}),5e3)}function Z(t){return O.get("car-svg-container")?.reduce(((e,n)=>(n.attributes.getNamedItem("value")?.nodeValue===t&&(e.item=n),e)),{item:O.get("car-svg-container")?.[0]}).item}function U(t,e){b.carStatus.get(t)!==e&&b.carStatus.set(t,e)}async function J(t){const e=await async function(t){return(await fetch(`${a}?id=${t}&status=started`,{method:"PATCH"})).json()}(t),n=Math.floor(e.distance/e.velocity);let s=O.get("bottom-container")?.[0].offsetWidth;s=s?s-200:0;const o=Z(t);s&&o&&(U(t,g[0]),function(t,e,n,a){let s=0;const o=(t-s)/(e/l*60),i=n,c=async()=>{if(s+=o,i.style.transform=`translateX(${s}px)`,s<t&&b.carStatus.get(a)===g[0])requestAnimationFrame(c);else if(b.carStatus.get(a)===g[1])i.style.transform="translateX(0px)";else if(b.isRace&&b.carStatus.get(a)===g[0]){b.isRace=!1,F(await K(a),e),await async function(t,e){const n=await async function(t){return(await fetch(`${r}/${t}`)).json()}(t);n.id?(n.wins+=1,n.time=n.time<e?n.time:e,await async function(t,e){return(await fetch(`${r}/${t}`,{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json()}(t,n)):await async function(t){return(await fetch(`${r}`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()}({id:Number(t),wins:1,time:e})}(a,e/l);const t=await et(b.pageWinners,b.sort,b.order);await S(t)}};c()}(s,n,o,t))}async function I(t){U(t,g[1]),W("button-start",!0,t),W("button-stop",!1,t);const e=Z(t);await async function(t){return(await fetch(`${a}?id=${t}&status=stopped`,{method:"PATCH"})).json()}(t),e&&(e.style.transform="translateX(0px)")}function q(t,e,n){t.has(e)?t.get(e)?.push(n):t.set(e,[n])}function Q(t){new Set(H.get(t))?.forEach((t=>{O.delete(t)}))}function Y(t){const{type:e,parentElement:n,classes:a,text:r,attributes:s,tag:o}=t;if(e&&n&&"string"==typeof e&&n instanceof HTMLElement){const t=document.createElement(e);if(a&&t.classList.add(...a),t.textContent=r||"",s)for(let e=0;e<s.length;e+=1)t.setAttribute(...s[e]);return n.appendChild(t),function(t,e){t&&t.classList&&t.classList.forEach((n=>{q(O,n,t),e&&q(H,e,n)}))}(t,o),t}throw new Error("You gave me a wrong data !")}async function K(t){return(await fetch(`${e}/${t}`)).json()}async function tt(t){return(await fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()}async function et(t,e,n,a=10){const s=await fetch(`${r}?_page=${t}&_limit=${a}${function(t,e){return t&&e?`&_sort=${t}&_order=${e}`:""}(e,d[n])}`),o=await s.json();return{items:await Promise.all(o.map((async t=>({...t,car:await K(t.id.toString())})))),count:s.headers.get("X-Total-Count")}}const nt=async function(t,n=7){const a=await fetch(`${e}?_page=${t}&_limit=${n}`);return{items:await a.json(),count:a.headers.get("X-Total-Count")}};var at=n(379),rt=n.n(at),st=n(767);rt()(st.Z,{insert:"head",singleton:!1}),st.Z.locals;!async function(){const t=nt(b.pageGarage),e=await et(b.pageWinners,b.sort,b.order);await async function(t,e){!function(){const t=Y({type:"div",parentElement:document.body,classes:[s,"upper-layer"]});Y({type:"button",parentElement:t,classes:["button","garage-button","inactive"],text:"TO GARAGE"}),Y({type:"button",parentElement:t,classes:["button","winners-button"],text:"TO WINNERS"})}(),await x(t),await $(e),Y({type:"div",parentElement:document.body,classes:["split-layer"]})}(t,e),A(),P()}()})()})();