(()=>{"use strict";var t={767:(t,e,n)=>{n.d(e,{Z:()=>f});var a=n(645),r=n.n(a),s=n(667),o=n.n(s),i=n(449),c=n(172),u=n(320),l=r()((function(t){return t[1]})),p=o()(i.Z),d=o()(c.Z),g=o()(u.Z);l.push([t.id,"* {\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\n.container {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n    padding: 10px;\r\n}\r\n\r\n.container-crud {\r\n    padding-top: 20px;\r\n}\r\n\r\n.button {\r\n    padding: 10px;\r\n    border: none;\r\n    border-radius: 10px;\r\n    box-shadow: 1px 5px 5px 0px rgba(212, 148, 45, 0.51);\r\n    background-color: rgb(248, 228, 46);\r\n    font-size: 14px;\r\n}\r\n\r\n.button:hover {\r\n    box-shadow: 1px 7px 7px 0px rgba(212, 148, 45, 0.51);\r\n    background-color: rgb(214, 198, 52);\r\n    transition: 1s;\r\n    cursor: pointer;\r\n}\r\n\r\n.input {\r\n    height: 25px;\r\n    padding: 5px;\r\n    border-radius: 5px;\r\n    font-size: 16px;\r\n}\r\n\r\n.input:hover {\r\n    cursor: pointer;\r\n}\r\n\r\n.button-generate {\r\n    width: 210px;\r\n}\r\n\r\n.button-generate,\r\n.button-create,\r\n.button-update {\r\n    background-color: rgb(232, 157, 28);\r\n}\r\n\r\n.container-track {\r\n    padding-top: 40px;\r\n}\r\n\r\n.label {\r\n    font-size: 24px;\r\n}\r\n\r\n.car-image {\r\n    position: absolute;\r\n    top: -13px;\r\n    left: 20px;\r\n    width: 60px;\r\n}\r\n\r\n.bottom-container {\r\n    position: relative;\r\n    height: fit-content;\r\n    border-bottom: dotted 2px black;\r\n}\r\n\r\n.finish-image {\r\n    position: absolute;\r\n    top: 15px;\r\n    right: 90px;\r\n    width: 40px;\r\n}\r\n\r\n.split-layer {\r\n    position: fixed;\r\n    top: 0;\r\n    width: 100vw;\r\n    height: 100%;\r\n    background-color: azure;\r\n    z-index: 1;\r\n}\r\n\r\n.upper-layer {\r\n    position: relative;\r\n    padding-left: 20px;\r\n    z-index: 2;\r\n}\r\n\r\n.go-top {\r\n    position: absolute;\r\n    top:60px;\r\n}\r\n\r\n.table-item {\r\n    text-align: center;\r\n    padding: 0 18px;\r\n}\r\n\r\n.inactive,\r\n.inactive:hover {\r\n    background-color: gray;\r\n}\r\n\r\n.pagination {\r\n    display: flex;\r\n    justify-content: center;\r\n    gap: 20px;\r\n    padding: 30px 0;\r\n}\r\n\r\n.button-prev,\r\n.button-next {\r\n    width: 120px;   \r\n}\r\n\r\n.car-svg-container {\r\n    position: relative;\r\n}\r\n\r\n.winner-label-container {\r\n    position: fixed;\r\n    top: 50vh;\r\n    left: calc(50vw - 120px);\r\n    z-index: 10;\r\n}\r\n\r\n.winner-label {\r\n    font-size: 32px;\r\n    color: red;\r\n}\r\n\r\n.car-item {\r\n    position: static;\r\n    width: 45px;\r\n}\r\n\r\n.sort {\r\n    background: url("+p+");\r\n    background-repeat: no-repeat ;\r\n    background-position: 100%;\r\n    user-select: none;\r\n}\r\n\r\n.sort:hover {\r\n    cursor: pointer;\r\n}\r\n\r\n.ascending {\r\n    background: url("+d+");\r\n    background-repeat: no-repeat ;\r\n    background-position: 100%;\r\n}\r\n\r\n.descending {\r\n    background: url("+g+");\r\n    background-repeat: no-repeat ;\r\n    background-position: 100%;\r\n}",""]);const f=l},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,a){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(a)for(var s=0;s<this.length;s++){var o=this[s][0];null!=o&&(r[o]=!0)}for(var i=0;i<t.length;i++){var c=[].concat(t[i]);a&&r[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},667:t=>{t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},172:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/img/asc.gif"},449:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/img/bg.gif"},320:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/img/desc.gif"},163:(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});const a=n.p+"assets/img/finish.png"},807:(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});const a=n.p+"assets/img/sports-car.svg"},379:(t,e,n)=>{var a,r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function o(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function i(t,e){for(var n={},a=[],r=0;r<t.length;r++){var i=t[r],c=e.base?i[0]+e.base:i[0],u=n[c]||0,l="".concat(c," ").concat(u);n[c]=u+1;var p=o(l),d={css:i[1],media:i[2],sourceMap:i[3]};-1!==p?(s[p].references++,s[p].updater(d)):s.push({identifier:l,updater:b(d,e),references:1}),a.push(l)}return a}function c(t){var e=document.createElement("style"),a=t.attributes||{};if(void 0===a.nonce){var s=n.nc;s&&(a.nonce=s)}if(Object.keys(a).forEach((function(t){e.setAttribute(t,a[t])})),"function"==typeof t.insert)t.insert(e);else{var o=r(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var u,l=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function p(t,e,n,a){var r=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(t.styleSheet)t.styleSheet.cssText=l(e,r);else{var s=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}function d(t,e,n){var a=n.css,r=n.media,s=n.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var g=null,f=0;function b(t,e){var n,a,r;if(e.singleton){var s=f++;n=g||(g=c(e)),a=p.bind(null,n,s,!1),r=p.bind(null,n,s,!0)}else n=c(e),a=d.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var n=i(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var a=0;a<n.length;a++){var r=o(n[a]);s[r].references--}for(var c=i(t,e),u=0;u<n.length;u++){var l=o(n[u]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}n=c}}}}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var s=e[a]={id:a,exports:{}};return t[a](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var a=e.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.nc=void 0,(()=>{const t="http://127.0.0.1:3000",e=`${t}/garage`,a=`${t}/engine`,r=`${t}/winners`,s="container",o=["Number","Car","Name","Wins","Best time (seconds)"],i=["garage","winners"],c=["button-garage-prev","button-garage-next"],u=["button-winners-prev","button-winners-next"],l=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],p=1e3,d={Moscvich:["400","402","408","415","2150","2142"],BMW:["2","3","4","5","6","7"],Lexus:["RX","ES","NX","GX","LX","LS"],Ferrari:["296 GTB","Roma","F8 Tributo","812 Superfast","SF90 Stradale"],LADA:["Granta","Vesta","XRAY","Largus","4x4","Niva"],Nissan:["Pathfinder","X-Trail","Qashqai","Terrano","Murano","Juke"],Toyota:["Corolla","Camry","C-HR","RAV4","Highlander","Fortuner"]},g={0:"descending",1:"ascending"};var f,b,h;!function(t){t[t.DESC=0]="DESC",t[t.ASC=1]="ASC"}(f||(f={})),function(t){t[t.started=0]="started",t[t.stopped=1]="stopped",t[t.drive=2]="drive"}(b||(b={})),function(t){t[t.id=0]="id",t[t.wins=1]="wins",t[t.time=2]="time"}(h||(h={}));const v={activeLayer:i[0],pageGarage:1,pageWinners:1,sort:"wins",order:f.DESC,maxPagesGarage:1,maxPagesWinners:1,isRace:!1,carStatus:new Map,carCurrentX:new Map,carDriveStatus:new Map},m=v;function y(t,e,n=!1){const a=`<svg xmlns="http://www.w3.org/2000/svg" class = "car-image ${n?"car-item":""}" enable-background="new 0 0 512 512" viewBox="0 0 512 512"><path fill="${e}" d="M417.3 349c-29.6 0-53.7-24.1-53.7-53.7s24.1-53.7 53.7-53.7 53.7 24.1 53.7 53.7S446.9 349 417.3 349zM417.3 251.5c-24.1 0-43.7 19.6-43.7 43.7s19.6 43.7 43.7 43.7 43.7-19.6 43.7-43.7S441.4 251.5 417.3 251.5zM93.1 349c-29.6 0-53.7-24.1-53.7-53.7s24.1-53.7 53.7-53.7 53.7 24.1 53.7 53.7S122.7 349 93.1 349zM93.1 251.5c-24.1 0-43.7 19.6-43.7 43.7S69 339 93.1 339s43.7-19.6 43.7-43.7S117.2 251.5 93.1 251.5z"/><path fill="${e}" d="M93.1 324.2c-15.9 0-28.9-13-28.9-28.9s13-28.9 28.9-28.9 28.9 13 28.9 28.9S109 324.2 93.1 324.2zM93.1 276.3c-10.4 0-18.9 8.5-18.9 18.9s8.5 18.9 18.9 18.9 18.9-8.5 18.9-18.9S103.5 276.3 93.1 276.3zM417.1 324.2c-15.9 0-28.9-13-28.9-28.9s13-28.9 28.9-28.9 28.9 13 28.9 28.9S433 324.2 417.1 324.2zM417.1 276.3c-10.4 0-18.9 8.5-18.9 18.9s8.5 18.9 18.9 18.9 18.9-8.5 18.9-18.9S427.5 276.3 417.1 276.3z"/><path fill="${e}" d="M495,324h-35.3v-10H490v-18.8c0-0.7,0.1-1.4,0.4-2l10.4-23.7l-19.9-14.9\n    c-22-16.5-49.2-25.6-76.7-25.6H362c-1,0-2-0.3-2.8-0.9l-44.3-30.1c-24.2-16.4-52.4-25.1-81.6-25.1H128.7L10,209.2v4.8h6\n    c2.8,0,5,2.2,5,5v43c0,2.8-2.2,5-5,5h-6v27.3L25,314h25.6v10H22.5c-1.6,0-3-0.7-4-2L1,299c-0.7-0.9-1-1.9-1-3v-34\n    c0-2.8,2.2-5,5-5h6v-33H5c-2.8,0-5-2.2-5-5v-13.5c0-2.2,1.4-4.1,3.5-4.8l123-37.5c0.5-0.1,1-0.2,1.5-0.2h105.3\n    c31.2,0,61.4,9.3,87.2,26.8l43,29.2h40.7c29.6,0,59,9.8,82.7,27.6l23.1,17.3c1.9,1.4,2.5,3.9,1.6,6L500,296.3V319\n    C500,321.8,497.8,324,495,324z"/><rect width="71.6" height="10" x="303.2" y="314" fill="${e}"/><rect width="147.7" height="10" x="135.5" y="314" fill="${e}"/><path fill="${e}" d="M37.7 267H16c-2.8 0-5-2.2-5-5v-43c0-2.8 2.2-5 5-5h21.8c2 0 3.8 1.2 4.6 3l10.5 24.5c.6 1.4.5 3.1-.2 4.4l-10.5 18.5C41.2 266 39.5 267 37.7 267zM21 257h13.8l7.8-13.8L34.5 224H21V257zM331 227h-75c-.3 0-.5 0-.8-.1l-100.5-15.5 1.5-9.9L256.4 217h59l-4.1-2.9c-24.8-17.7-54-27.1-84.5-27.1h-89.1l-26.2 7.7 24.8 3.8-1.5 9.9-47-7.2c-2.3-.4-4.1-2.3-4.2-4.6-.2-2.3 1.3-4.5 3.6-5.1l48.5-14.2c.5-.1.9-.2 1.4-.2h89.8c32.6 0 63.8 10 90.3 28.9l16.8 12c1.8 1.3 2.5 3.5 1.9 5.6C335.1 225.6 333.2 227 331 227z"/><path fill="${e}" d="M195.2 217.7c-.3 0-.5 0-.8-.1l-20.4-3.1c-2.4-.4-4.2-2.5-4.2-4.9V182c0-2.8 2.2-5 5-5h20.4c2.8 0 5 2.2 5 5v30.6c0 1.5-.6 2.8-1.7 3.8C197.6 217.2 196.4 217.7 195.2 217.7zM179.8 205.2l10.4 1.6V187h-10.4V205.2zM356.2 300.2l-162.6-9.7c-1.4-.1-2.7-.8-3.6-1.9l-30.9-39c-1-1.2-1.3-2.8-.9-4.3s1.4-2.7 2.8-3.4l32.3-14.5c.9-.4 1.8-.5 2.8-.4l158.4 24-1.5 9.9L196 237.2l-25 11.2 25.5 32.2 160.4 9.6L356.2 300.2z"/><rect width="31" height="10" x="476" y="263" fill="${e}"/></svg>`;return n||t.insertAdjacentHTML("beforeend",a),a}function E(t,e){const n=nt({type:"div",parentElement:t,classes:[s,`container-${e}`],tag:i[0]});return nt({type:"input",parentElement:n,classes:["input",`text-${e}`],attributes:[["type","text"]],tag:i[0]}),nt({type:"input",parentElement:n,classes:["input",`color-${e}`],attributes:[["type","color"]],tag:i[0]}),nt({type:"button",parentElement:n,classes:["button",`button-${e}`,"inactive"],text:e.toUpperCase(),tag:i[0]}),n}function w(t,e,n){const a=nt({type:"div",parentElement:t,classes:[s],tag:n.toLowerCase()});nt({type:"p",parentElement:a,classes:[`${n}-items`,"label"],text:`${n.toUpperCase()} (${e||"0"})`,tag:n.toLowerCase()}),function(t,e){if(e===i[0]){const e=t%7>0?1:0,n=Math.floor(t/7)+e;v.maxPagesGarage=n}else if(e===i[1]){const e=t%10>0?1:0,n=Math.floor(t/10)+e;v.maxPagesWinners=n}}(Number(e),n.toLowerCase())}function x(t,e,n){const a=nt({type:"div",parentElement:t,classes:[s],tag:`${n||i[0]}`});nt({type:"p",parentElement:a,classes:["page-number","label"],text:`Page #${e}`,tag:`${n||i[0]}`})}function L(t,e){const n=nt({type:"div",parentElement:t,classes:["pagination"],tag:e});nt({type:"button",parentElement:n,classes:["button","button-prev",`button-${e}-prev`],text:"PREV",tag:e}),nt({type:"button",parentElement:n,classes:["button","button-next",`button-${e}-next`],text:"NEXT",tag:e}),U(e)}async function $(t){const e=nt({type:"div",parentElement:document.body,classes:[i[0],v.activeLayer===i[0]?"upper-layer":""],tag:i[0]});!function(t){const e=nt({type:"div",parentElement:t,classes:["container-crud"],tag:i[0]});E(e,"create"),E(e,"update");const n=nt({type:"div",parentElement:e,classes:[s],tag:i[0]});nt({type:"button",parentElement:n,classes:["button","button-race"],text:"RACE",tag:i[0]}),nt({type:"button",parentElement:n,classes:["button","button-reset","inactive"],text:"RESET",tag:i[0]}),nt({type:"button",parentElement:n,classes:["button","button-generate"],text:"GENERATE CARS",tag:i[0]})}(e),await async function(t,e){const n=nt({type:"div",parentElement:t,classes:["container-track"],tag:i[0]}),a=await e;w(n,a.count,i[0]),x(n,v.pageGarage),function(t,e){e.forEach((e=>{!function(t,e){const n=nt({type:"div",parentElement:t,classes:["container-car"],tag:i[0]}),a=nt({type:"div",parentElement:n,classes:[s],tag:i[0]});nt({type:"button",parentElement:a,classes:["button","button-select"],text:"SELECT",attributes:[["value",`${e.id||""}`]],tag:i[0]}),nt({type:"button",parentElement:a,classes:["button","button-remove"],text:"REMOVE",attributes:[["value",`${e.id||""}`]],tag:i[0]}),nt({type:"p",parentElement:a,classes:["car-name"],text:e.name,tag:i[0]});const r=nt({type:"div",parentElement:t,classes:[s,"bottom-container"],tag:i[0]});nt({type:"button",parentElement:r,classes:["button","button-start"],text:"A",attributes:[["value",`${e.id||""}`]],tag:i[0]}),nt({type:"button",parentElement:r,classes:["button","button-stop","inactive"],text:"B",attributes:[["value",`${e.id||""}`]],tag:i[0]}),y(nt({type:"div",parentElement:r,classes:["car-svg-container"],attributes:[["value",`${e.id||""}`]],tag:i[0]}),e.color),nt({type:"img",parentElement:r,classes:["finish-image"],attributes:[["src","./assets/img/finish.png"],["alt","finish flag"]],tag:i[0]}),e.id&&Q(e.id?.toString(),"stopped")}(t,e)}))}(nt({type:"div",parentElement:n,classes:["container-cars"],tag:i[0]}),a.items)}(e,t),L(e,i[0])}function S(t,e,n){const a=nt({type:"tr",parentElement:t,classes:["row"],tag:i[1]}),r=n?"th":"td";e[1]&&e.forEach((t=>{nt({type:r,parentElement:a,classes:["table-item",n&&["Wins","Best time (seconds)"].includes(t)?"sort":"uselessClass",`${T(t)===v.sort?g[v.order]:"uselessClass"}`].filter((t=>"uselessClass"!==t)),tag:i[1]}).innerHTML=t}))}n(807),n(163);const C=async function(t){const e=nt({type:"div",parentElement:document.body,classes:[i[1],"go-top",v.activeLayer===i[1]?"upper-layer":"uselessClass"].filter((t=>"uselessClass"!==t)),tag:i[1]});w(e,t.count,i[1]),x(e,v.pageWinners,i[1]),await function(t,e){const n=nt({type:"table",parentElement:t,classes:["table"],tag:i[1]});S(n,o,!0);for(let t=0;t<e.length;t+=1){const{wins:a,time:r,car:s}=e[t];s&&S(n,[(t+1).toString(),y(document.body,s.color,!0),s.name,a.toString(),r.toString()])}}(e,t.items),L(e,i[1])};async function M(){const t=await st(v.pageWinners,v.sort,v.order);R(i[1]),et(i[1]),await C(t),N()}function T(t){return t?"Wins"===t?h[1]:"time"===t.split(" ")[1]?h[2]:h[0]:h[0]}const k=M;function j(t,e){W.get(t)?.forEach((t=>{t.removeEventListener("click",e,!1),t.classList.add("inactive")}))}function A(t,e){W.get(t)?.forEach((t=>{t.addEventListener("click",e),t.classList.remove("inactive")}))}function P(){const[t,e]=i;v.activeLayer===t?(A("garage-button",P),j("winners-button",P),v.activeLayer=e):(j("garage-button",P),A("winners-button",P),v.activeLayer=t),i.forEach((t=>{W.get(t)?.forEach((t=>{t.classList.toggle("upper-layer")}))}))}function z(){W.get("winners-button")?.forEach((t=>{t.addEventListener("click",P)})),W.get("button-create")?.forEach((t=>{t.addEventListener("click",(async()=>{const t=_("text-create"),e=_("color-create");t&&e&&(await rt({name:t,color:e}),O())}))})),W.get("text-create")?.forEach((t=>{t.addEventListener("keyup",(()=>{const e=W.get("button-create")?.slice(-1)[0];e&&(t.value?e.classList.remove("inactive"):e.classList.add("inactive"))}))})),W.get("button-select")?.forEach((t=>{t.addEventListener("click",(async()=>{const e=t.value;var n,a;H("text-update",(n=await at(e)).name),H("color-update",n.color),(a=n.id)&&W.get("text-update")?.forEach((t=>{t.id=a.toString()})),G("button-update",!0),G("button-select",!0),t.classList.add("inactive")}))})),W.get("button-update")?.forEach((t=>{t.addEventListener("click",(async()=>{if(!t.classList.contains("inactive")){const t=_("text-update"),n=_("color-update"),a=_("text-update",!0);t&&n&&(await async function(t,n){return(await fetch(`${e}/${t}`,{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})).json()}(a,{name:t,color:n}),await O(),k())}}))})),W.get("button-remove")?.forEach((t=>{t.addEventListener("click",(async n=>{n.preventDefault();const a=t.value;await async function(t){await fetch(`${e}/${t}`,{method:"DELETE"})}(a),await O(),await async function(t){return(await fetch(`${r}/${t}`,{method:"DELETE"})).json()}(a),k()}))})),W.get("button-generate")?.forEach((t=>{t.addEventListener("click",(async()=>{const t=[];for(let e=0;e<100;e+=1){const e=V(),n=F();t.push(rt({name:n,color:e}))}await Promise.allSettled(t),O()}))})),c.forEach((t=>{W.get(t)?.forEach((t=>{t.addEventListener("click",(()=>{t.classList.contains("inactive")||(t.classList.contains("button-next")?m.pageGarage+=1:m.pageGarage-=1,O())}))}))})),W.get("button-start")?.forEach((t=>{t.addEventListener("click",(async()=>{if(!t.classList.contains("inactive")){const e=t.value;G("button-start",!1,e),G("button-stop",!0,e),G("button-reset",!0),G("button-race",!1),await Y(e),J(e)}}))})),W.get("button-stop")?.forEach((t=>{t.addEventListener("click",(()=>{t.classList.contains("inactive")||(K(t.value),function(){let t=!0;return W.get("button-start")?.forEach((e=>{e.classList.contains("inactive")&&(t=!1)})),t}()&&(G("button-reset",!1),G("button-race",!0)))}))})),W.get("button-reset")?.forEach((t=>{t.addEventListener("click",(async()=>{const t=await ot(m.pageGarage);let e=0;t.items.forEach((async n=>{n.id&&await K(n.id.toString()),e===t.items.length-1&&(G("button-reset",!1),G("button-race",!0),G("button-generate",!0),G("button-select",!0),G("button-remove",!0),U("garage")),e+=1}))}))})),W.get("button-race")?.forEach((t=>{t.addEventListener("click",(async()=>{if(!t.classList.contains("inactive")){t.classList.add("inactive");const e=await ot(m.pageGarage);m.isRace=!0,G("button-reset",!0),G("button-generate",!1),G("button-select",!1),G("button-remove",!1),G("button-garage-prev",!1),G("button-garage-next",!1),B("text-create"),B("text-update"),G("button-create",!1),G("button-update",!1);const n=[];e.items.forEach((t=>{if(t.id){const e=t.id.toString(),a=new Promise((t=>{t(async function(t){G("button-start",!1,t),G("button-stop",!0,t),await Y(t),J(t)}(e))}));n.push(a)}})),Promise.all(n)}}))}))}function N(){W.get("sort")?.forEach((t=>{t.addEventListener("click",(async t=>{const e=t.target,n=e.innerText;var a;a=e,W.get("sort")?.forEach((t=>{t!==a&&(t.classList.remove("ascending"),t.classList.remove("descending"))})),function(t){const e=t.classList;e.contains("ascending")?(e.remove("ascending"),e.add("descending")):e.contains("descending")&&e.remove("descending"),e.add("ascending")}(e),v.order=function(t){return t.classList.contains("descending")?f.DESC:f.ASC}(e),v.sort=T(n),M()}))})),u.forEach((t=>{W.get(t)?.forEach((t=>{t.addEventListener("click",(()=>{t.classList.contains("inactive")||(t.classList.contains("button-next")?v.pageWinners+=1:v.pageWinners-=1,M())}))}))}))}function R(t){W.get(t)?.forEach((t=>{t.remove()}))}async function O(){const t=ot(m.pageGarage);R(i[0]),et(i[0]),await $(t),z()}function H(t,e){W.get(t)?.forEach((t=>{t.value=e}))}function G(t,e,n){W.get(t)?.forEach((t=>{n?t.value===n&&(e?t.classList.remove("inactive"):t.classList.add("inactive")):e?t.classList.remove("inactive"):t.classList.add("inactive")}))}const W=new Map,X=new Map;function _(t,e){let n="";return W.get(t)?.forEach((t=>{n=e?t.id:t.value})),n}function B(t){W.get(t)?.forEach((t=>{t.value=""}))}function D(t,e){return Math.floor(Math.random()*(e+t)+t)}function V(){const t=l.length;let e="#";for(let n=0;n<6;n+=1)e+=l[D(0,t)];return e}function F(){const t=Object.keys(d),e=D(0,t.length),n=D(0,d[t[e]].length);return`${t[e]} ${d[t[e]][n]}`}function Z(t){return t[0].toUpperCase()+t.slice(1)}function U(t){const e=`page${Z(t)}`,n=`maxPages${Z(t)}`;1===v[e]?G(`button-${t}-prev`,!1):G(`button-${t}-prev`,!0),v[e]>=v[n]?G(`button-${t}-next`,!1):G(`button-${t}-next`,!0)}async function J(t){const e=await async function(t){const e=await fetch(`${a}?id=${t}&status=drive`,{method:"PATCH"}).catch();return 200===e.status?{...await e.json()}:{success:!1}}(t);e.success||v.carStatus.set(t,b[2])}async function I(t,e){(function(t,e){const n=nt({type:"div",parentElement:document.body,classes:["winner-label-container"]});nt({type:"p",parentElement:n,classes:["winner-label"],text:`${t} wins with result ${e/p} seconds!`})})(t.name,e),setTimeout((()=>{W.get("winner-label-container")?.forEach((t=>{t.style.display="none"})),W.delete("winner-label-container")}),5e3)}function q(t){return W.get("car-svg-container")?.reduce(((e,n)=>(n.attributes.getNamedItem("value")?.nodeValue===t&&(e.item=n),e)),{item:W.get("car-svg-container")?.[0]}).item}function Q(t,e){v.carStatus.get(t)!==e&&v.carStatus.set(t,e)}async function Y(t){const e=await async function(t){return(await fetch(`${a}?id=${t}&status=started`,{method:"PATCH"})).json()}(t),n=Math.floor(e.distance/e.velocity);let s=W.get("bottom-container")?.[0].offsetWidth;s=s?s-200:0;const o=q(t);s&&o&&(Q(t,b[0]),function(t,e,n,a){let s=0;const o=(t-s)/(e/p*60),i=n,c=async()=>{s+=o,i.style.transform=`translateX(${s}px)`,s<t&&v.carStatus.get(a)===b[0]?requestAnimationFrame(c):v.carStatus.get(a)===b[1]?i.style.transform="translateX(0px)":v.isRace&&v.carStatus.get(a)===b[0]&&(v.isRace=!1,I(await at(a),e),await async function(t,e){const n=await async function(t){return(await fetch(`${r}/${t}`)).json()}(t);n.id?(n.wins+=1,n.time=n.time<e?n.time:e,await async function(t,e){return(await fetch(`${r}/${t}`,{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json()}(t,n)):await async function(t){return(await fetch(`${r}`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()}({id:Number(t),wins:1,time:e})}(a,e/p),await M())};c()}(s,n,o,t))}async function K(t){Q(t,b[1]),G("button-start",!0,t),G("button-stop",!1,t);const e=q(t);await async function(t){return(await fetch(`${a}?id=${t}&status=stopped`,{method:"PATCH"})).json()}(t),e&&(e.style.transform="translateX(0px)")}function tt(t,e,n){t.has(e)?t.get(e)?.push(n):t.set(e,[n])}function et(t){new Set(X.get(t))?.forEach((t=>{W.delete(t)}))}function nt(t){const{type:e,parentElement:n,classes:a,text:r,attributes:s,tag:o}=t;if(e&&n&&"string"==typeof e&&n instanceof HTMLElement){const t=document.createElement(e);if(a&&t.classList.add(...a),t.textContent=r||"",s)for(let e=0;e<s.length;e+=1)t.setAttribute(...s[e]);return n.appendChild(t),function(t,e){t&&t.classList&&t.classList.forEach((n=>{tt(W,n,t),e&&tt(X,e,n)}))}(t,o),t}throw new Error("You gave me a wrong data !")}async function at(t){return(await fetch(`${e}/${t}`)).json()}async function rt(t){return(await fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()}async function st(t,e,n,a=10){const s=await fetch(`${r}?_page=${t}&_limit=${a}${function(t,e){return t&&e?`&_sort=${t}&_order=${e}`:""}(e,f[n])}`),o=await s.json();return{items:await Promise.all(o.map((async t=>({...t,car:await at(t.id.toString())})))),count:s.headers.get("X-Total-Count")}}const ot=async function(t,n=7){const a=await fetch(`${e}?_page=${t}&_limit=${n}`);return{items:await a.json(),count:a.headers.get("X-Total-Count")}};var it=n(379),ct=n.n(it),ut=n(767);ct()(ut.Z,{insert:"head",singleton:!1}),ut.Z.locals;!async function(){const t=ot(v.pageGarage),e=await st(v.pageWinners,v.sort,v.order);await async function(t,e){!function(){const t=nt({type:"div",parentElement:document.body,classes:[s,"upper-layer"]});nt({type:"button",parentElement:t,classes:["button","garage-button","inactive"],text:"TO GARAGE"}),nt({type:"button",parentElement:t,classes:["button","winners-button"],text:"TO WINNERS"})}(),await $(t),await C(e),nt({type:"div",parentElement:document.body,classes:["split-layer"]})}(t,e),z(),N()}()})()})();